{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rishabh/Desktop/Blog-Website-with-react-and-firebase/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/rishabh/Desktop/Blog-Website-with-react-and-firebase/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/rishabh/Desktop/Blog-Website-with-react-and-firebase/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rishabh/Desktop/Blog-Website-with-react-and-firebase/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{collection,deleteDoc,doc,getDocs}from'firebase/firestore';import{auth,db}from\"../firebase-config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(_ref){var isAuth=_ref.isAuth;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),postLists=_useState2[0],setPostLists=_useState2[1];var postCollectionRef=collection(db,\"posts\");useEffect(function(){var getPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getDocs(postCollectionRef);case 2:data=_context.sent;setPostLists(data.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});}));case 4:case\"end\":return _context.stop();}}},_callee);}));return function getPosts(){return _ref2.apply(this,arguments);};}();getPosts();});var deletePost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){var postDoc;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:postDoc=doc(db,\"posts\",id);_context2.next=3;return deleteDoc(postDoc);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function deletePost(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"homePage\",children:postLists.map(function(post){return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"postheader\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:/*#__PURE__*/_jsx(\"h1\",{children:post.title})}),isAuth&&post.author.id===auth.currentUser.uid&&/*#__PURE__*/_jsx(\"div\",{className:\"deletePost\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){deletePost(post.id);},children:\"\\uD83D\\uDDD1\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"postTextContainer\",children:post.postText}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"@\",post.author.name]})]});})});}export default Home;","map":{"version":3,"names":["React","useEffect","useState","collection","deleteDoc","doc","getDocs","auth","db","Home","isAuth","postLists","setPostLists","postCollectionRef","getPosts","data","docs","map","id","deletePost","postDoc","post","title","author","currentUser","uid","postText","name"],"sources":["/Users/rishabh/Desktop/Blog-Website-with-react-and-firebase/src/pages/Home.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { collection, deleteDoc, doc, getDocs } from  'firebase/firestore';\nimport { auth, db } from \"../firebase-config\";\n\nfunction Home({ isAuth }) {\n\n    const [postLists, setPostLists] = useState([]);\n\n    const postCollectionRef = collection(db,\"posts\");\n\n    useEffect(()=>{\n        const getPosts = async () =>{\n            const data = await getDocs(postCollectionRef);\n            setPostLists(data.docs.map((doc)=> ({...doc.data(), id : doc.id } )));\n        }\n\n        getPosts();\n    });\n\n    const deletePost = async (id)=>{\n        const postDoc = doc(db,\"posts\", id);\n        await deleteDoc(postDoc);\n    }\n\n    return (\n        <div className=\"homePage\">\n            {\n                postLists.map((post) => {\n                    return (\n                        <div className=\"post\">\n                            <div className=\"postheader\">\n                                <div className=\"title\">\n                                    <h1>{post.title}</h1>\n                                </div>\n\n                                { isAuth && post.author.id===auth.currentUser.uid && <div className=\"deletePost\">\n                                    <button onClick={()=>{deletePost(post.id)}}>&#128465;</button>\n                                </div>}\n                            </div>\n                            <div className=\"postTextContainer\">\n                                {post.postText}\n                            </div>\n                            <h3>@{post.author.name}</h3>\n                        </div>\n                    );\n                })\n            }\n        </div>\n    );\n}\n\nexport default Home;"],"mappings":"mlBAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,UAAU,CAAEC,SAAS,CAAEC,GAAG,CAAEC,OAAO,KAAS,oBAAoB,CACzE,OAASC,IAAI,CAAEC,EAAE,KAAQ,oBAAoB,CAAC,wFAE9C,QAASC,KAAI,MAAa,IAAVC,OAAM,MAANA,MAAM,CAElB,cAAkCR,QAAQ,CAAC,EAAE,CAAC,wCAAvCS,SAAS,eAAEC,YAAY,eAE9B,GAAMC,kBAAiB,CAAGV,UAAU,CAACK,EAAE,CAAC,OAAO,CAAC,CAEhDP,SAAS,CAAC,UAAI,CACV,GAAMa,SAAQ,6FAAG,oKACMR,QAAO,CAACO,iBAAiB,CAAC,QAAvCE,IAAI,eACVH,YAAY,CAACG,IAAI,CAACC,IAAI,CAACC,GAAG,CAAC,SAACZ,GAAG,wCAASA,GAAG,CAACU,IAAI,EAAE,MAAEG,EAAE,CAAGb,GAAG,CAACa,EAAE,IAAI,CAAC,CAAC,CAAC,sDACzE,kBAHKJ,SAAQ,2CAGb,CAEDA,QAAQ,EAAE,CACd,CAAC,CAAC,CAEF,GAAMK,WAAU,6FAAG,kBAAOD,EAAE,oIAClBE,OAAO,CAAGf,GAAG,CAACG,EAAE,CAAC,OAAO,CAAEU,EAAE,CAAC,wBAC7Bd,UAAS,CAACgB,OAAO,CAAC,yDAC3B,kBAHKD,WAAU,6CAGf,CAED,mBACI,YAAK,SAAS,CAAC,UAAU,UAEjBR,SAAS,CAACM,GAAG,CAAC,SAACI,IAAI,CAAK,CACpB,mBACI,aAAK,SAAS,CAAC,MAAM,wBACjB,aAAK,SAAS,CAAC,YAAY,wBACvB,YAAK,SAAS,CAAC,OAAO,uBAClB,oBAAKA,IAAI,CAACC,KAAK,EAAM,EACnB,CAEJZ,MAAM,EAAIW,IAAI,CAACE,MAAM,CAACL,EAAE,GAAGX,IAAI,CAACiB,WAAW,CAACC,GAAG,eAAI,YAAK,SAAS,CAAC,YAAY,uBAC5E,eAAQ,OAAO,CAAE,kBAAI,CAACN,UAAU,CAACE,IAAI,CAACH,EAAE,CAAC,EAAE,0BAAmB,EAC5D,GACJ,cACN,YAAK,SAAS,CAAC,mBAAmB,UAC7BG,IAAI,CAACK,QAAQ,EACZ,cACN,0BAAML,IAAI,CAACE,MAAM,CAACI,IAAI,GAAM,GAC1B,CAEd,CAAC,CAAC,EAEJ,CAEd,CAEA,cAAelB,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}